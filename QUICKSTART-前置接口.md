# å‰ç½®æ¥å£åŠŸèƒ½ - å¿«é€Ÿå¼€å§‹

## ğŸš€ å¿«é€Ÿé…ç½®ï¼ˆ3æ­¥æå®šï¼‰

### æ­¥éª¤ 1: å®‰è£…ä¾èµ–å¹¶è¿ç§»æ•°æ®åº“

```bash
# 1. å®‰è£… Python ä¾èµ–
cd /Users/lihui/Work/cursor/dm-brain/apitest/platform/backend
pip install jsonpath-ng==1.6.1

# 2. æ‰§è¡Œæ•°æ®åº“è¿ç§»
mysql -u root -p apitest < migrate_add_pre_request.sql

# 3. é‡å¯åç«¯æœåŠ¡
sh start.sh
```

### æ­¥éª¤ 2: é…ç½®ç™»å½•æ¥å£æµ‹è¯•æ•°æ®

1. æ‰“å¼€å‰ç«¯ç•Œé¢
2. æ‰¾åˆ°ç™»å½•æ¥å£ï¼š`POST /admin-api/system/auth/login`
3. ç‚¹å‡»"æ·»åŠ æµ‹è¯•æ•°æ®"
4. å¡«å†™ï¼š
   - **æ•°æ®åç§°**: `ç®¡ç†å‘˜ç™»å½•`
   - **è¯·æ±‚ä½“**:
     ```json
     {
       "tenantName": "é¼èŒ‚ç§‘æŠ€",
       "username": "admin",
       "password": "admin123",
       "captchaVerification": "",
       "rememberMe": true
     }
     ```
5. ä¿å­˜

### æ­¥éª¤ 3: é…ç½®ä¸šåŠ¡æ¥å£ï¼ˆä½¿ç”¨å‰ç½®æ¥å£ï¼‰

1. é€‰æ‹©ä»»æ„éœ€è¦è®¤è¯çš„ä¸šåŠ¡æ¥å£
2. ç‚¹å‡»"æ·»åŠ æµ‹è¯•æ•°æ®"
3. å±•å¼€"å‰ç½®æ¥å£é…ç½®"åŒºåŸŸï¼š
   - **å‰ç½®æ¥å£**: é€‰æ‹© `POST /admin-api/system/auth/login`
   - **å‰ç½®æ¥å£æµ‹è¯•æ•°æ®**: é€‰æ‹© `ç®¡ç†å‘˜ç™»å½•`
   - ç‚¹å‡»"æ·»åŠ å˜é‡æå–"ï¼š
     - å˜é‡å: `accessToken`
     - JSONPath: `$.data.accessToken`
4. åœ¨"è¯·æ±‚å¤´"ä¸­å¡«å†™ï¼š
   ```json
   {
     "Authorization": "Bearer {{accessToken}}"
   }
   ```
5. ä¿å­˜

### æ­¥éª¤ 4: æµ‹è¯•

ç‚¹å‡»"æ‰§è¡Œ"æŒ‰é’®ï¼ŒæŸ¥çœ‹åç«¯æ—¥å¿—è¾“å‡ºï¼š

```
ğŸ”„ æ‰§è¡Œå‰ç½®æ¥å£: POST /admin-api/system/auth/login (ä½¿ç”¨æµ‹è¯•æ•°æ®: ç®¡ç†å‘˜ç™»å½•)
âœ… å‰ç½®æ¥å£æ‰§è¡ŒæˆåŠŸï¼Œæå–å˜é‡: ['accessToken']
  ğŸ“Œ æå–å˜é‡ accessToken = 2d2bd2b803a3425984aaa2aee2a483a2
```

âœ… å®Œæˆï¼ç°åœ¨ä½ çš„ä¸šåŠ¡æ¥å£ä¼šè‡ªåŠ¨ä½¿ç”¨ç™»å½•è·å–çš„ tokenã€‚

## ğŸ“– å®Œæ•´æ–‡æ¡£

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ï¼š[å‰ç½®æ¥å£åŠŸèƒ½ä½¿ç”¨æŒ‡å—.md](./å‰ç½®æ¥å£åŠŸèƒ½ä½¿ç”¨æŒ‡å—.md)

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

1. **å‰ç½®æ¥å£**: åœ¨ä¸»æ¥å£æ‰§è¡Œå‰å…ˆæ‰§è¡Œçš„æ¥å£ï¼ˆé€šå¸¸æ˜¯ç™»å½•æ¥å£ï¼‰
2. **å˜é‡æå–**: ä»å‰ç½®æ¥å£å“åº”ä¸­æå–éœ€è¦çš„å€¼ï¼ˆå¦‚ accessTokenï¼‰
3. **å˜é‡ä½¿ç”¨**: åœ¨ä¸»æ¥å£å‚æ•°ä¸­ä½¿ç”¨ `{{variableName}}` å¼•ç”¨æå–çš„å˜é‡

## ğŸ”§ å¸¸è§é…ç½®ç¤ºä¾‹

### ç¤ºä¾‹ 1: åŸºæœ¬è®¤è¯

```json
{
  "å‰ç½®æ¥å£": "POST /admin-api/system/auth/login",
  "å˜é‡æå–": {
    "accessToken": "$.data.accessToken"
  },
  "è¯·æ±‚å¤´": {
    "Authorization": "Bearer {{accessToken}}"
  }
}
```

### ç¤ºä¾‹ 2: æå–å¤šä¸ªå˜é‡

```json
{
  "å˜é‡æå–": {
    "accessToken": "$.data.accessToken",
    "refreshToken": "$.data.refreshToken",
    "userId": "$.data.userId"
  },
  "è¯·æ±‚å¤´": {
    "Authorization": "Bearer {{accessToken}}",
    "X-User-Id": "{{userId}}"
  }
}
```

### ç¤ºä¾‹ 3: åœ¨è¯·æ±‚ä½“ä¸­ä½¿ç”¨å˜é‡

```json
{
  "å˜é‡æå–": {
    "userId": "$.data.userId"
  },
  "è¯·æ±‚ä½“": {
    "user_id": "{{userId}}",
    "action": "update_profile"
  }
}
```

## â“ å¸¸è§é—®é¢˜

**Q: å˜é‡æ²¡æœ‰è¢«æ›¿æ¢ï¼Ÿ**
- æ£€æŸ¥å˜é‡åæ˜¯å¦ä¸€è‡´
- ç¡®ä¿ä½¿ç”¨åŒèŠ±æ‹¬å·: `{{variableName}}`

**Q: å‰ç½®æ¥å£æ‰§è¡Œå¤±è´¥ï¼Ÿ**
- æ£€æŸ¥ç™»å½•æ¥å£çš„æµ‹è¯•æ•°æ®æ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹åç«¯æ—¥å¿—ç¡®è®¤é”™è¯¯ä¿¡æ¯

**Q: æå–ä¸åˆ°å˜é‡ï¼Ÿ**
- æ£€æŸ¥ JSONPath æ˜¯å¦æ­£ç¡®
- ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹å®é™…å“åº”ç»“æ„

## ğŸ‰ å®Œæˆ

ç°åœ¨ä½ å¯ä»¥è½»æ¾åœ°ä¸ºæ‰€æœ‰éœ€è¦è®¤è¯çš„æ¥å£é…ç½®è‡ªåŠ¨ç™»å½•åŠŸèƒ½äº†ï¼
